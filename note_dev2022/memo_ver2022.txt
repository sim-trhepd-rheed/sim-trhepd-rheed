2022/4/9 STR 2022版の2017版からの変更
---------------------------------------
userに関係することは
1. .bファイルへのiz,da1,sap部分の出力を変更。その他、不要な変数の出力を削除。
	古いコードで計算した.bファイルは使えないので新たに計算しなおす。
	bulk,surfとも入力ファイルは元のままで良い。

2. a(1)*da1に補正したかったらbulk.txt,surf.txtのizを-izにする。
	izが正なら元のままa(1)-da1に補正。

3. scan角度数とmlの余計な制限を無くした。

4. .s-file(3)とlog-file(4)の書式変更
	ih,ikとビーム数が大きくなっても桁数と1行の出力数の上限を気にしないで正常に出力できる。
	.s-file(3)の ih,ikの行は初めに　deg, 以下 ih ik, のようにビームごとに','で区切る。
	これによりグラフのプロットソフトで','区切りのタイトル行として読み込める。
	intensityの有効数字が1桁増加。

	古いfortranでは、新しい書式に対応していない可能性があるが
	gfortran(windowsのminGw, WSLのubuntu)、Intel fortran(WSLのubuntu)で正常に使えた。

5. U0をmakeするときscpotU0.f90の代わりにscpot.f90を使う。
-------------------------------------
まだbulkからの(11)のtextファイルの出力はしていない。
trmatgのrworkの追加は反映。
-------------------------------------

.f90の変更の概要

asf: 　余計な引数を無くした。
scpot:　余計な引数を無くした。Bについて余計な部分を無くした。sapについて余計な部分を無くした。
	a,bはscpot内のasfcrrで求めて補正する。
	iz > 0 なら　a(1)-da1に補正。
	iz < 0 なら　a(1)*da1に補正。
strfac: 回転中心と鏡映面上に原子があるかどうかの判定のための精度を１桁緩くした。
	先頭のほうのパラメータTOLで変更できる。

bulksub:　scan角度数の制限を無くした。時間が掛かってもstepを細かくしたいことがありうる。
bulkio:　mlの制限を無くした。
	ml<=0も許可(bulkからの反射が0になる:TRHEPDでthetaが小さいときはそれで良いかも知れない)。
	以下はsurfioでも同様
	iz,da1,sapを記憶して保存する。a,bはscpot内のasfcrrで求めて補正する。
	　da1,sapの最適化を分かりやすくするため。
	asf,scpotの変更に対応して、(1)へのiz,da1,sap部分の出力を変更。

	bulkの原子がｚ方向のユニットの厚さccの中央付近に来るように
	zoffsetという値をバルクと表面の原子すべてに加えていたが、
	zの最適化などで分かりにくくなるのでzoffsetを廃止。

	xyzファイルのｚ座標でも、zoffsetを廃止。

surfio: bulkioと同様
bulkU0,surfU0: bulkio,surfioの変更に従った。

scpotU0は不要になった。
---------------------------------------
iprn < 0では(4)に出力しない。
iprn >= 0では(4)に出力。
さらに iprn = 1ではsurfrefでirep1,irep2をコンソール出力。

surfm_org:　 iprn = -1　としたので(4)に出力しない。
surfm: iprn = 0　のままなので、従来通り(4)に出力。
