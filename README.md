# sim-trhepd-rheed

## Overview

The software 'sim-trhepd-rheed' is a simulator for total-reflection high-energy positron diffraction (TRHEPD) and reflection high-energy electron diffraction (RHEED).Please cite Ref. [1] and [2], if you use the software in a research paper. The software was written originally by Takashi Hanada and the present package on github is maintained by Takeo Hoshi. The software is based on the theory written in Ref.[3]. The present package contains Fortran codes in the src/ directory and Python3 scripts in the tool/ directory. The present README file is assumed to be built with gfortran in a standard Linux environment.

Refernce list

[1] T. Hanada, H. Daimon, and S. Ino， Rocking-curve analysis of reflection high-energy electron diffraction from the Si(111)-(√3 × √3 )R30°-Al, -Ga, and -In surfaces,  Phys. Rev. B 51, 13320–13325 (1995).

[2] T. Hanada, Y. Motoyama, K. Yoshimi, T. Hoshi, sim-trhepd-rheed -- Open-source simulator of total-reflection high-energy positron diffraction (TRHEPD) and reflection high-energy electron diffraction (RHEED), preprint: https://arxiv.org/abs/2110.09477

[3] A. Ichimiya, Many-beam calculation of reflection high energy electron diffraction (RHEED) intensities by the multi-slice method, Jpn. J. Appl. Phys. 22, 176-180 (1983).

## Code preparation

### Download the source code

Download the source code with git command in a working directory

$ git clone http://github.com/sim-trhepd-rheed/sim-trhepd-rheed

The following directory will be generated

sim-trhepd-rheed

## Directory Tree

 * `doc/`: The documents directory
   * `html/`: html manual for sim-trhepd-rheed
   * `sim-trhepd-rheed_en.pdf` : pdf manual for sim-trhepd-rheed
 * `sample/`: The sample directory
   * `Ge_001_c4x2/` : The sample directory for Ge_001_c4x2 which contains README, and input/output files for sim-trhepd-rheed.
   * `T4Al_on_Si_111/` :  The sample directory for T4Al_on_Si_111 which contains README, and input/output files for sim-trhepd-rheed.
 * `src/`: The source directory
 * `tool/`: The directory contains the post tool
   * `make_convolution.py`: The post script for calculating rocking curve.
   * `todft/`: The directory contains the post tool `to_dft.py` for generating the input file for Quantum ESPRESSO.  

### Build the binary files

In the sim-trhepd-rheed directory, execute the command below in order.

$ cd src

$ make

Then the following binary files will be generated

bulk.exe

surf.exe

xyz.exe

potcalc.exe

In an application study, one runs bulk.exe first for the calculation of the bulk part and
then, one runs surf.exe  for the calculation of the surface part.
As options, the data file of the atomic positions in the XYZ format can be generated by the binary xyz.exe and the data file the scattering potential is generated by the binary potcalc.exe

Set the environmental variables properly so that you can run the binary files, if needed.

## Test calculation

Test calculations are presented in the sample/ directory. See the document for details.

## Mode swithcing between TRHEPD (positron) and RHEED (electron) modes

The default setting is the TRHEPD (positron) mode.
If one would like to use the RHEED (electron) mode, one should modify the line

ep=‘P'

into

ep='E'

of the files src/surfm.f90 and src/bulkm.f90 before the compilation.
